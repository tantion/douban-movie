define("js/bt-iqiyi",function(require,a,b){"use strict";function c(a,b,c){var d=new g.Deferred,e=[],f="http://so.iqiyi.com/so/q_#keyword#";return f=f.replace("#keyword#",encodeURI(a)),i.hasOwnProperty(f)?(e=i[f],e&&e.length?d.resolve(e):d.reject()):g.ajax({url:f,type:"GET",timeout:j,xhrFields:{withCredentials:!1}}).done(function(a){a=a.replace(/src=/gi,"data-src=");var e=g(g.parseHTML(a)),h=e.find(".s_main-mx"),j=e.find(".mod_sideright"),l=h.find('[data-widget-searchlist-elem="item"]'),m=[];m=g.map(l,function(a){var d=g(a),e=d.find(".film_about h2"),f=e.find("a.orange"),h=g.trim(e.text()),i=g.trim(e.find(".gray12 a").text()).replace(/(\d+)年/,"$1"),j=h.match(/\[(\S+)\]/),l=f.prop("href")||"",m=f.length?f[0].hostname:"";return j&&j.length&&(j=j[1]),/\d+/.test(i)||(i=""),k.hasOwnProperty(m)&&(m=k[m]),h=f.attr("title"),(c&&("连续剧"===j||"纪录片"===j)||!c&&"电影"===j)&&h&&l&&(!i||i&&parseInt(i,10)===b)?{source:m,type:j,year:i,href:l,title:h}:void 0}),c||j.find("> ul > li").each(function(){var a=g(this),b=a.find("a.piclist_img"),c=b.length?b[0].hostname:"",d=g.trim(a.find(".piclist_title").text());k.hasOwnProperty(c)&&(c=k[c]),d.indexOf("[电影]")>-1&&c&&m.push({source:c,type:"电影",year:"",href:b.attr("href"),title:b.find("img").attr("title")||d})}),i[f]=m,m.length?d.resolve(m):d.reject()}).fail(function(){d.reject()}),d.promise()}function d(a){var b=h.render(l,{items:a}),c=g(b);return c.on("mouseenter","a",function(){g(this).tipsy({gravity:"w",offset:3}).tipsy("show")}),c}function e(a){return a.title2||a.title||""}function f(a){var b=e(a),f=new g.Deferred;return b?(f.notify("正在加载搜索结果，请耐心等待..."),c(b,a.year,a.istv).done(function(a){f.resolve(d(a),a.length)}).fail(function(){f.reject()})):f.reject(),f.promise()}var g=require("jquery"),h=require("mustache"),i={},j=3e4,k={"www.iqiyi.com":"爱奇艺","www.letv.com":"乐视TV","www.56.com":"56视频","www.funshion.com":"风行视频","tv.sohu.com":"搜狐视频","v.qq.com":"腾讯视频","www.pps.tv":"PPS","v.pps.tv":"PPS","ipd.pps.tv":"PPS","v.youku.com":"优酷","www.tudou.com":"土豆","vod.kankan.com":"迅雷看看","www.m1905.com":"M1905","v.ku6.com":"酷六"},l='{{#items}}<dl class="movie-improve-bt-dl"><dt class="movie-improve-bt-title"><a title="点击打开播放页面" target="_blank" href="{{href}}">{{#source}}[{{source}}] {{/source}}{{title}}</a></dt>{{#files}}<dd class="movie-improve-bt-desc">{{&title}}</dd>{{/files}}</dl>{{/items}}';b.exports={name:"在线观看",search:f}});