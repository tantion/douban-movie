define("js/bt-66ys",function(require,a,b){"use strict";function c(a){var b=i.render(m,{items:a}),c=h(b);return c.on("mouseenter","a",function(){h(this).tipsy({gravity:"w",offset:3}).tipsy("show")}),c}function d(a){var b=new h.Deferred,c=null;return j.hasOwnProperty(a)?(c=j[a],c&&c.length?b.resolve(c):b.reject()):h.ajax({url:a,type:"GET",timeout:l,xhrFields:{withCredentials:!0}}).done(function(c){c=c.replace(/src=/gi,"data-src=");var d=h(h.parseHTML(c)),e=d.find('table[bgcolor="#0099cc"]').find("a"),f=[];f=h.map(e,function(a){var b=h(a),c=h.trim(b.text()),d=b.prop("href");return c&&!d.match(/^http:\/\//i)?{href:d,title:c,files:null}:void 0}),j[a]=f,f.length?b.resolve(f):b.reject()}).fail(function(){b.reject()}),b.promise()}function e(a){var b=new h.Deferred;return h.ajax({url:"http://www.url-encode-decode.com/process",type:"post",timeout:l,dataType:"text",data:{action:"encode",text:a,encoding:"GBK"}}).done(function(a){b.resolve(a)}).fail(function(){b.reject()}),b.promise()}function f(a,b){var c=new h.Deferred,d="";return k.hasOwnProperty(a)?(d=k[a],d?c.resolve(d):c.reject()):e(a).done(function(d){h.ajax({url:"http://www.66ys.cc/e/search/index123.php",type:"post",timeout:l,processData:!1,headers:{"Content-Type":"application/x-www-form-urlencoded"},data:"tempid=1&tbname=article&show=title&keyboard="+d}).done(function(d){d=d.replace(/src=/gi,"data-src=");var e="",f=h(h.parseHTML(d)),g=f.find('table[width="388"]'),i=!1,j=[];j=h.map(g,function(b){var c=h(b),d=c.find("a").eq(1),e=d.text(),f=d.prop("href"),g=c.find('td[valign="top"]').text();return e.indexOf(a)>-1?{href:f,text:g,title:e}:void 0}),j.length>0&&(e=j[0].href,j.length>1&&h.each(j,function(a,c){!i&&c.text.indexOf(b)>-1&&(e=c.href,i=!0)})),k[a]=e,e?c.resolve(e):c.reject()}).fail(function(){c.reject()})}).fail(function(){c.reject()}),c.promise()}function g(a){var b=a.title2||a.title,e=new h.Deferred;return b?(e.notify("正在加载搜索结果，请耐心等待..."),f(b,a.year,a.actors).done(function(a){e.notify("马上就好，正在加载BT地址..."),d(a).done(function(a){e.resolve(c(a),a.length)}).fail(function(){e.reject()})}).fail(function(){e.reject()})):e.reject(),e.promise()}var h=require("jquery"),i=require("mustache"),j={},k={},l=3e4,m='{{#items}}<dl class="movie-improve-bt-dl"><dt class="movie-improve-bt-title"><a title="请右键复制下载地址或者点击下载。" class="private-play-download-link" href="{{href}}">{{&title}}</a></dt>{{#files}}<dd class="movie-improve-bt-desc">{{&title}}</dd>{{/files}}</dl>{{/items}}';b.exports={name:"66影视",search:g}});