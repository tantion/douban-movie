define(function(require,a,b){"use strict";function c(){var a=this.href,b=new g.Deferred;return window.open(a,"_baiduyun"),b.promise()}function d(a){var b=new g.Deferred,d=null,e="http://www.baidu.com/s?wd=#keyword#%20torrent%20site%3Apan.baidu.com";return e=e.replace("#keyword#",encodeURIComponent(a)),g.ajax({url:e,type:"GET",timeout:h,xhrFields:{withCredentials:!0}}).done(function(a){a=a.replace(/src=/gi,"data-src=");var e=g(g.parseHTML(a)),f=e.find(".c-container"),h=[];f.each(function(){var a=g(this),b=a.find(".t a").eq(0),d=a.find(".c-abstract").eq(0),e=g.trim(d.text()),f="",i=e.match(/文件名:(.+) 文件大小:(.+) 分享者/);i&&i.length>2?(e=i[1],f=i[2],f&&(e+=" "+f)):e="",e&&h.push({href:b.attr("href"),download:c,title:e,files:null})}),h.length?(d={items:h},b.resolve(d)):b.reject()}).fail(function(){b.reject()}),b.promise()}function e(a){return a.title2||a.title||""}function f(a){var b=e(a),c=new g.Deferred;return b?(c.notify("正在加载搜索结果，请耐心等待..."),d(b).done(function(a){c.resolve(a)}).fail(function(){c.reject()})):c.reject(),c.promise()}var g=require("jquery"),h=2e4;b.exports={search:f}});