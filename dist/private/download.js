define("private/download",function(require,a){"use strict";function b(a){var b=new d.Deferred;return d.ajax({url:a,type:"get",dataType:"text",timeout:3e4}).done(function(c){var f=c.replace(/src=/gi,"data-src="),g=d(d.parseHTML(f)),h=a.replace(/file\.php.*/i,"down.php"),i=g.find("form");i.attr("action",h),e||(e=d("<iframe/>").hide().appendTo("body")),e.html(i),i[0].submit(),b.resolve()}).fail(function(){b.reject()}),b.promise()}function c(){d(document).on("mouseenter","a[href]",function(){var a=d(this),b=null,c=a.prop("href");c.match(/^http:\/\/\w+\.kidown\.com\/\w+\/file\.php/i)&&(b=a.next(".private-play-link"),b.length||(b=d('<a class="private-play-link" target="_blank" href="http://tantion.com/private/play.html?url='+c+'">云播</a>').insertAfter(a)))}).on("click","a[href]",function(a){var c=d(this),e=c.prop("href");e.match(/^http:\/\/\w+\.kidown\.com\/\w+\/file\.php/i)&&(a.preventDefault(),b(e).fail(function(){c.attr("title","网络错误，无法下载")}))})}if(location.href.match(/private\/detail\.html/i)){var d=require("jquery"),e=null;a.init=c}});