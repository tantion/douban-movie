define("private/player",function(require,a,b){"use strict";function c(a){window.postMessage({action:"play",url:a},"*")}function d(){var a=f.Deferred();return m?a.resolve(m):n&&j.requestHash(n).done(function(a){m=a,history.replaceState(null,null,location.pathname+"?infohash="+a)}).fail(function(b){a.reject(b)}),a.promise()}function e(){d().done(function(a){j.requestUrlByHash(a).done(function(a){h.setAttribute("href",a[0].vod_url),n="http://"+h.host+"/*",chrome.runtime.sendMessage({action:"referer",data:{url:n}})}).done(function(a){var b=f.map(a,function(a,b){var c=a.vod_url,d=a.vod_url_dt17,e="流畅版";return 1===b?e="高清版":b>1&&(e="超清版"),'<li><a class="private-play-vod" href="/private/play.html?flv='+encodeURIComponent(d)+"&m3u8="+encodeURIComponent(c)+'" data-flv="'+d+'" data-m3u8="'+c+'">'+e+'</a><a href="'+d+'">flv</a><a href="'+c+'">m3u8</a></li>'});b=b.join("\n"),i.html(b),c({flv:a[0].vod_url_dt17,m3u8:a[0].vod_url})}).fail(function(a){k.error(a||"未知错误")})}).fail(function(a){a&&k.error(a)}),f(document).on("click",".private-play-vod",function(a){a.preventDefault();var b=f(this),d=b.data("flv"),e=b.data("m3u8");c({flv:d,m3u8:e})})}if(location.href.match(/private\/play\.html/i)){var f=require("jquery"),g=require("purl"),h=document.createElement("a"),i=(f(".container"),f(".video-container"),f(".video-nav")),j=require("private/yun"),k=require("alertify"),l=g(location.href).param(),m=l.infohash||"",n=l.url||"";b.exports={init:e}}});