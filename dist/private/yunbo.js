define("private/yunbo",function(require,a,b){"use strict";function c(){i("article.alertify-log-show").click()}function d(a){return/^\w+$/.test(a)?!0:!1}function e(a,b){var c=i.Deferred();return j.requestUrlByHash(a).done(function(){var e="";b?(e=d(a)?"http://tantion.com/private/play.html?infohash="+a:"http://tantion.com/private/play.html?url="+a,c.resolve(e)):d(a)?j.requestBtUrl(a).done(function(a){e="http://vod.xunlei.com/share.html?from=macthunder&type=bt&url="+encodeURIComponent(a)+"&playwindow=player",c.resolve(e)}).fail(function(a){c.reject(a)}):(e="http://vod.xunlei.com/share.html?from=macthunder&url="+encodeURIComponent(a)+"&playwindow=player",c.resolve(e))}).fail(function(a){c.reject(a)}),c.promise()}function f(a,b){c(),l.log("正在加载云播地址... <br />同时 `"+m+"+单击` 可添加到云播","",1e4),j.requestHash(a).done(function(a){c(),l.success("准备云播"),e(a,b).done(function(a){c(),l.success("已找到云播资源，正在打开播放页面",1e3),chrome.runtime.sendMessage({action:"openurl",data:{url:a}})}).fail(function(a){c(),l.error(a||"云播失败，未知错误")})}).fail(function(a){c(),l.error(a||"云播失败，未知错误")})}function g(a){c(),l.log("正在添加地址到云播...","",1e4),j.addByUrl(a).done(function(){c(),l.success("已添加找到云播空间",1e3)}).fail(function(a){c(),l.error(a||"添加云播失败，未知错误")})}function h(){i(document).on("click","a.private-play-download-link",function(a){var b=i(this).prop("href");k.isYunAction(a)?(a.preventDefault(),f(b)):k.isPrivateAction(a)?(a.preventDefault(),f(b,!0)):k.isAddAction(a)&&(a.preventDefault(),g(b))})}var i=require("jquery"),j=require("private/yun"),k=require("private/adapter"),l=require("alertify"),m=navigator.userAgent.match(/Macintosh/i)?"command":"ctrl";b.exports={init:h}});